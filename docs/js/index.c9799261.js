(function(e){function t(t){for(var o,s,c=t[0],i=t[1],l=t[2],h=0,d=[];h<c.length;h++)s=c[h],r[s]&&d.push(r[s][0]),r[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={index:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("df31")},"26e6":function(e,t,n){},"3de3":function(e,t,n){"use strict";var o=n("e794"),r=n.n(o);r.a},df31:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=n("76a0"),a=n.n(r),s=(n("aa35"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("mt-field",{attrs:{label:"行"},model:{value:e.rowNum,callback:function(t){e.rowNum=t},expression:"rowNum"}}),n("mt-field",{attrs:{label:"列"},model:{value:e.colNum,callback:function(t){e.colNum=t},expression:"colNum"}}),n("div",[n("mt-button",{attrs:{type:"default"},on:{click:e.handleOnLoadSyncClick}},[e._v("同步生成")]),n("mt-button",{attrs:{type:"default"},on:{click:e.handleOnLoadAsyncClick}},[e._v("异步生成")]),n("mt-button",{attrs:{type:"default"},on:{click:e.handleOnReloadClick}},[e._v("刷新页面")])],1),n("div",{staticClass:"cmd"},e._l(e.cmdList,function(t,o){return n("div",{key:o},[e._v(e._s(t))])})),n("v-table",{attrs:{"data-source":e.tableData}})],1)}),c=[],i=(n("ac6a"),n("1c4c"),n("96cf"),n("3040")),l=n("f7fe"),u=n.n(l),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"v-table-wrapper",style:{height:e.tableWrapperHeight+"px"}},[n("div",{ref:"vTable",staticClass:"v-table"},[n("table",[n("thead",{ref:"thead",staticClass:"v-table-thead"},[n("tr",[e.showCol[0]>0?n("th",{key:-1,attrs:{colspan:e.showCol[0]}},[n("span")]):e._e(),e._l((e.dataSource[0]||[]).slice(e.showRow[0],e.showRow[1]),function(t,o){return n("th",{key:o+e.showRow[0]},[n("span",[e._v("title"+e._s(t))])])}),e.showCol[1]<(e.dataSource[0]||[]).length?n("th",{key:-2,attrs:{colspan:e.showCol[1]-e.showCol[0]}},[n("span")]):e._e()],2)]),n("tbody",{ref:"tbody",staticClass:"v-table-tbody"},[e._l(e.dataSource.slice(0,e.showRow[0]),function(t,o){return e.showRow[0]>0?n("tr",{key:o},[e.showRow[0]>0?n("td",{key:0},[n("span",[e._v(e._s(t[0]))])]):e._e()]):e._e()}),e._l(e.dataSource.slice(e.showRow[0],e.showRow[0]+1),function(t,o){return n("tr",{key:o+e.showRow[0]},[n("td",{key:0},[n("span",[e._v(e._s(t[0]))])]),e.showCol[0]>1&&e.showRow[1]-e.showRow[0]>0?n("td",{key:1,attrs:{rowspan:e.showRow[1]-e.showRow[0],colspan:e.showCol[0]}}):e._e(),e._l(t.slice(Math.max(e.showCol[0],1),e.showCol[1]),function(t,o){return n("td",{key:o+Math.max(e.showCol[0],1)},[n("span",[e._v(e._s(t))])])})],2)}),e._l(e.dataSource.slice(e.showRow[0]+1,e.showRow[1]),function(t,o){return n("tr",{key:o+e.showRow[0]+1},[n("td",{key:-1},[n("span",[e._v(e._s(t[0]))])]),e._l(t.slice(e.showCol[0],e.showCol[1]),function(t,o){return n("td",{key:o+e.showCol[0]},[n("span",[e._v(e._s(t))])])})],2)}),e._l(e.dataSource.slice(e.showRow[1]),function(t,o){return n("tr",{key:o+e.showRow[1]},[n("td",{key:-1},[n("span",[e._v(e._s(t[0]))])])])})],2)])])])},d=[],f=n("84a2"),p=n.n(f),w=n("1157"),m=n.n(w),v=function(e){return new Promise(function(t){return setTimeout(t,e)})},g={name:"v-table",data:function(){return{tableWrapperHeight:0,showRow:[0,0],showCol:[0,0]}},props:{dataSource:{type:Array,default:function(){}}},watch:{dataSource:function(){this.handleTableShowAreaChange(),this.handleWrapperHeightChange()}},methods:{handleWrapperHeightChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,o,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v(0);case 2:t=m()(window),n=m()(document),o=m()(this.$refs.wrapper),r=m()(this.$refs.vTable),this.tableWrapperHeight=Math.min(t.height()+n.scrollTop()-o.offset().top,r.height());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleOnResize:function(){this.handleWrapperHeightChangeThrottle()},handleTableShowAreaChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,o,r,a,s,c,i,l,u,h,d,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v(0);case 2:return t=m()(this.$refs.wrapper),n=m()(this.$refs.vTable),o=m()(this.$refs.thead),e.next=7,v(0);case 7:r=m()(this.$refs.tbody.querySelector("tr:first-of-type > td:first-of-type")),n.width(),n.height(),a=o.height(),s=r.outerWidth(),c=r.outerHeight(),console.log(s,c),i=t.scrollTop(),l=t.scrollLeft(),u=Math.max(Math.floor((i-a)/c),0),h=Math.max(Math.floor(l/s),0),d=Math.min(Math.ceil((t.height()+i)/c),this.dataSource.length),f=Math.min(Math.ceil((t.width()+l)/s),(this.dataSource[0]||[]).length),console.log(h,f,u,d),this.showRow=[u,d],this.showCol=[h,f];case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleOnScroll:function(){this.handleTableShowAreaChange()}},created:function(){this.handleWrapperHeightChangeThrottle=p()(this.handleWrapperHeightChange,100)},mounted:function(){this.handleOnScroll(),this.$refs.wrapper.addEventListener("scroll",this.handleOnScroll,!1),this.handleOnResize(),window.addEventListener("resize",this.handleOnResize,!1)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("scroll",this.handleOnScroll),window.removeEventListener("scroll",this.handleOnResize)}},b=g,y=(n("3de3"),n("2877")),_=Object(y["a"])(b,h,d,!1,null,null,null);_.options.__file="v-table.vue";var C=_.exports,k={name:"app",data:function(){return{cmdList:[],tableData:[],rowNum:100,colNum:100}},watch:{rowNum:function(){this.rowNumOnChangeDebounce()},colNum:function(){this.colNumOnChangeDebounce()}},methods:{cmdListPush:function(e){this.cmdList.push(e),this.cmdList=this.cmdList},rowNumOnChangeDebounce:localStorage?u()(function(){localStorage.setItem("rowNum",this.rowNum)},100):function(){return!1},colNumOnChangeDebounce:localStorage?u()(function(){localStorage.setItem("colNum",this.colNum)},100):function(){return!1},handleOnLoadSyncClick:function(){var e=this;Object(i["a"])(regeneratorRuntime.mark(function t(){var n,o,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=Date.now(),e.cmdList=[],e.cmdListPush("clear data"),e.tableData=[],t.next=6,v(100);case 6:return console.log("start loading"),e.cmdListPush("loading"),e.cmdList=e.cmdList,o=[],t.next=12,v(0);case 12:for(r=function(t){o.push(Array.from({length:e.colNum}).map(function(e,n){return"".concat(t,",").concat(n)}))},a=0;a<e.rowNum;a++)r(a);setTimeout(function(){var t=Date.now()-n;console.log("".concat(t,"ms")),console.log("loaded"),e.cmdListPush("".concat(t,"ms")),e.cmdList=e.cmdList,e.cmdListPush("loaded"),e.cmdList=e.cmdList},0),e.tableData=o;case 16:case"end":return t.stop()}},t,this)}))()},handleOnLoadAsyncClick:function(){var e=this;Object(i["a"])(regeneratorRuntime.mark(function t(){var n,o,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=Date.now(),e.cmdList=[],e.cmdListPush("clear data"),e.tableData=[],t.next=6,v(100);case 6:console.log("start loading"),e.cmdListPush("start loading"),o=[],r=regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o.push(Array.from({length:e.colNum}).map(function(e,t){return"".concat(n,",").concat(t)})),t.next=3,v(0);case 3:e.tableData=o;case 4:case"end":return t.stop()}},t,this)}),a=0;case 11:if(!(a<e.rowNum)){t.next=16;break}return t.delegateYield(r(a),"t0",13);case 13:a++,t.next=11;break;case 16:setTimeout(function(){var t=Date.now()-n;console.log("".concat(t,"ms")),console.log("loaded"),e.cmdListPush("".concat(t,"ms")),e.cmdListPush("loaded")},0);case 17:case"end":return t.stop()}},t,this)}))()},handleOnReloadClick:function(){window.location.reload()}},components:{"v-table":C},mounted:function(){if(localStorage){var e=localStorage.getItem("rowNum");this.rowNum=void 0!==e&&null!==e?e:this.rowNum;var t=localStorage.getItem("colNum");this.colNum=void 0!==t&&null!==t?t:this.colNum}}},R=k,O=(n("e14f"),Object(y["a"])(R,s,c,!1,null,null,null));O.options.__file="app.vue";var S=O.exports;o["default"].use(a.a),o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(S)}}).$mount("#app")},e14f:function(e,t,n){"use strict";var o=n("26e6"),r=n.n(o);r.a},e794:function(e,t,n){}});
//# sourceMappingURL=index.c9799261.js.map