(function(t){function e(e){for(var o,c,i=e[0],s=e[1],l=e[2],h=0,d=[];h<i.length;h++)c=i[h],r[c]&&d.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={index:0},a=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("df31")},"26e6":function(t,e,n){},"3de3":function(t,e,n){"use strict";var o=n("e794"),r=n.n(o);r.a},df31:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=n("76a0"),a=n.n(r),c=(n("aa35"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("mt-field",{attrs:{label:"行"},model:{value:t.rowNum,callback:function(e){t.rowNum=e},expression:"rowNum"}}),n("mt-field",{attrs:{label:"列"},model:{value:t.colNum,callback:function(e){t.colNum=e},expression:"colNum"}}),n("div",[n("mt-button",{attrs:{type:"default"},on:{click:t.handleOnLoadSyncClick}},[t._v("同步生成")]),n("mt-button",{attrs:{type:"default"},on:{click:t.handleOnLoadAsyncClick}},[t._v("异步生成")]),n("mt-button",{attrs:{type:"default"},on:{click:t.handleOnReloadClick}},[t._v("刷新页面")])],1),n("div",{staticClass:"cmd"},t._l(t.cmdList,function(e,o){return n("div",{key:o},[t._v(t._s(e))])})),n("v-table",{attrs:{"data-source":t.tableData}})],1)}),i=[],s=(n("ac6a"),n("1c4c"),n("96cf"),n("3040")),l=n("f7fe"),u=n.n(l),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",staticClass:"v-table-wrapper",style:{height:t.tableWrapperHeight+"px"}},[n("div",{ref:"vTable",staticClass:"v-table"},[n("table",[n("thead",{ref:"thead",staticClass:"v-table-thead"},[n("tr",t._l(t.dataSource[0]||[],function(e,o){return n("th",{key:o},[t._v("title"+t._s(e))])}))]),n("tbody",{ref:"tbody",staticClass:"v-table-tbody"},[t._l(t.dataSource.slice(0,t.showRow[0]),function(e,o){return n("tr",{key:o},[n("td",{key:0},[t._v(t._s(e[0]))])])}),t._l(t.dataSource.slice(t.showRow[0],t.showRow[0]+1),function(e,o){return n("tr",{key:o+t.showRow[0]},[n("td",{key:0},[t._v(t._s(e[0]))]),t.showCol[0]>0?[n("td",{key:1,attrs:{rowspan:t.showRow[1]-t.showRow[0],colspan:t.showCol[0]}})]:t._e(),t._l(e.slice(t.showCol[0],t.showCol[1]),function(e,o){return n("td",{key:o+t.showCol[0]},[t._v("\n            "+t._s(e)+"\n          ")])})],2)}),t._l(t.dataSource.slice(t.showRow[0]+1,t.showRow[1]),function(e,o){return n("tr",{key:o+t.showRow[0]+1},[n("td",{key:0},[t._v(t._s(e[0]))]),t._l(e.slice(t.showCol[0],t.showCol[1]),function(e,o){return n("td",{key:o+t.showCol[0]},[t._v(t._s(e)+" ")])})],2)}),t._l(t.dataSource.slice(t.showRow[1]),function(e,o){return n("tr",{key:o+t.showRow[1]},[n("td",{key:0},[t._v(t._s(e[0]))])])})],2)])])])},d=[],f=n("84a2"),m=n.n(f),p=n("1157"),w=n.n(p),v=function(t){return new Promise(function(e){return setTimeout(e,t)})},g={name:"v-table",data:function(){return{tableWrapperHeight:0,showRow:[0,0],showCol:[0,0]}},props:{dataSource:{type:Array,default:function(){}}},watch:{dataSource:function(){this.handleWrapperHeightChange()}},methods:{handleWrapperHeightChange:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,o,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=w()(window),n=w()(document),o=w()(this.$refs.wrapper),r=w()(this.$refs.vTable),t.next=6,v(0);case 6:this.tableWrapperHeight=Math.min(e.height()+n.scrollTop()-o.offset().top,r.height());case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleOnResize:function(){this.handleWrapperHeightChangeThrottle()},handleOnScroll:function(){var t=w()(this.$refs.wrapper),e=w()(this.$refs.vTable),n=w()(this.$refs.thead),o=e.width(),r=e.height(),a=n.height(),c=o/(this.dataSource[0]||[]).length,i=(r-a)/(this.dataSource||[]).length,s=t.scrollTop(),l=t.scrollLeft(),u=Math.max(Math.floor((s-a)/i),0),h=Math.max(Math.floor(l/c),0),d=Math.min(Math.ceil((t.height()+s)/i),this.dataSource.length),f=Math.min(Math.ceil((t.width()+l)/c),(this.dataSource[0]||[]).length);console.log(h,f,u,d),this.showRow=[u+1,d-1],this.showCol=[h+1,f-1]}},created:function(){this.handleWrapperHeightChangeThrottle=m()(this.handleWrapperHeightChange,100)},mounted:function(){this.$refs.wrapper.addEventListener("scroll",this.handleOnScroll,!1),this.handleOnResize(),window.addEventListener("resize",this.handleOnResize,!1)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("scroll",this.handleOnScroll),window.removeEventListener("scroll",this.handleOnResize)}},b=g,y=(n("3de3"),n("2877")),_=Object(y["a"])(b,h,d,!1,null,null,null);_.options.__file="v-table.vue";var k=_.exports,L={name:"app",data:function(){return{cmdList:[],tableData:[],rowNum:100,colNum:100}},watch:{rowNum:function(){this.rowNumOnChangeDebounce()},colNum:function(){this.colNumOnChangeDebounce()}},methods:{cmdListPush:function(t){this.cmdList.push(t),this.cmdList=this.cmdList},rowNumOnChangeDebounce:localStorage?u()(function(){localStorage.setItem("rowNum",this.rowNum)},100):function(){return!1},colNumOnChangeDebounce:localStorage?u()(function(){localStorage.setItem("colNum",this.colNum)},100):function(){return!1},handleOnLoadSyncClick:function(){var t=this;Object(s["a"])(regeneratorRuntime.mark(function e(){var n,o,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=Date.now(),t.cmdList=[],t.cmdListPush("clear data"),t.tableData=[],e.next=6,v(100);case 6:return console.log("start loading"),t.cmdListPush("loading"),t.cmdList=t.cmdList,o=[],e.next=12,v(0);case 12:for(r=function(e){o.push(Array.from({length:t.colNum}).map(function(t,n){return"".concat(e,",").concat(n)}))},a=0;a<t.rowNum;a++)r(a);setTimeout(function(){var e=Date.now()-n;console.log("".concat(e,"ms")),console.log("loaded"),t.cmdListPush("".concat(e,"ms")),t.cmdList=t.cmdList,t.cmdListPush("loaded"),t.cmdList=t.cmdList},0),t.tableData=o;case 16:case"end":return e.stop()}},e,this)}))()},handleOnLoadAsyncClick:function(){var t=this;Object(s["a"])(regeneratorRuntime.mark(function e(){var n,o,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=Date.now(),t.cmdList=[],t.cmdListPush("clear data"),t.tableData=[],e.next=6,v(100);case 6:console.log("start loading"),t.cmdListPush("start loading"),o=[],r=regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o.push(Array.from({length:t.colNum}).map(function(t,e){return"".concat(n,",").concat(e)})),e.next=3,v(0);case 3:t.tableData=o;case 4:case"end":return e.stop()}},e,this)}),a=0;case 11:if(!(a<t.rowNum)){e.next=16;break}return e.delegateYield(r(a),"t0",13);case 13:a++,e.next=11;break;case 16:setTimeout(function(){var e=Date.now()-n;console.log("".concat(e,"ms")),console.log("loaded"),t.cmdListPush("".concat(e,"ms")),t.cmdListPush("loaded")},0);case 17:case"end":return e.stop()}},e,this)}))()},handleOnReloadClick:function(){window.location.reload()}},components:{"v-table":k},mounted:function(){if(localStorage){var t=localStorage.getItem("rowNum");this.rowNum=void 0!==t&&null!==t?t:this.rowNum;var e=localStorage.getItem("colNum");this.colNum=void 0!==e&&null!==e?e:this.colNum}}},O=L,C=(n("e14f"),Object(y["a"])(O,c,i,!1,null,null,null));C.options.__file="app.vue";var N=C.exports;o["default"].use(a.a),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(N)}}).$mount("#app")},e14f:function(t,e,n){"use strict";var o=n("26e6"),r=n.n(o);r.a},e794:function(t,e,n){}});
//# sourceMappingURL=index.fff7d59d.js.map